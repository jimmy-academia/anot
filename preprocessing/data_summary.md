# Yelp Data Analysis Summary

Source: `oldsrc/data/yelp/restaurants_cache_1.jsonl`, `oldsrc/data/yelp/reviews_cache_1.jsonl`

Generated by: `python data/analyze_yelp.py`

---

## Restaurant Attributes (220 restaurants)

### Rare Attributes (GT Filtering Candidates)

| Attribute | Count | % | GT Utility |
|-----------|-------|---|------------|
| GoodForDancing=True | 1 | 0.5% | Unique identifier |
| DriveThru=True | 2 | 0.9% | Near-unique |
| Corkage=True | 2 | 0.9% | Near-unique |
| CoatCheck=True | 6 | 3% | Good filter |
| BYOB=True | 15 | 7% | Good filter |
| DogsAllowed=True | 23 | 10% | Good filter |
| HappyHour=True | 37 | 17% | Moderate filter |
| WheelchairAccessible=True | 67 | 30% | Weak filter |

### Price Distribution

| Price Range | Count |
|-------------|-------|
| 1 (budget) | 96 |
| 2 (moderate) | 115 |
| 3 (upscale) | 6 |

### WiFi Distribution

| Value | Count |
|-------|-------|
| free | 177 |
| no | 35 |
| paid | 1 |

### Alcohol Distribution

| Value | Count |
|-------|-------|
| none | 155 |
| full_bar | 37 |
| beer_and_wine | 13 |

### Rare Categories (1-2 restaurants each)

- Shaved Ice, Themed Cafes, Venezuelan, Laotian
- Whiskey Bars, Gastropubs, Barbeque, Empanadas
- Acai Bowls, Street Vendors, Butcher, Personal Chefs

### Common Categories

| Category | Count |
|----------|-------|
| Restaurants | 220 |
| Food | 192 |
| Coffee & Tea | 177 |
| Breakfast & Brunch | 94 |
| Cafes | 93 |
| Sandwiches | 53 |
| American (New) | 42 |
| Bakeries | 41 |
| Nightlife | 35 |
| Bars | 30 |

### Hours Patterns

| Pattern | Count | % |
|---------|-------|---|
| Closed Monday | 28 | 13% |
| Late night (closes 10pm+) | 102 | 46% |
| Early open (before 8am) | 109 | 50% |

### Stars Distribution

| Stars | Count |
|-------|-------|
| 3.0 | 21 |
| 3.5 | 38 |
| 4.0 | 84 |
| 4.5 | 69 |
| 5.0 | 1 |

---

## Review Data (4,302 reviews)

### Stars Distribution

| Stars | Count |
|-------|-------|
| 1.0 | 829 |
| 2.0 | 833 |
| 3.0 | 880 |
| 4.0 | 880 |
| 5.0 | 880 |

### User Metadata

| Metric | Value | % |
|--------|-------|---|
| Elite reviews | 2,065 | 48% |
| High-social (100+ friends) | 1,835 | 43% |
| Date range | 2006-2022 | - |
| Recent (2020+) | 366 | 8.5% |

### Engagement Stats

| Metric | Max | Avg |
|--------|-----|-----|
| Useful votes | 142 | 2.5 |
| Funny votes | 113 | 1.1 |
| Cool votes | 142 | 1.2 |

### Review Length

| Stat | Value |
|------|-------|
| Min | 95 chars |
| Max | 5,000 chars |
| Avg | 1,579 chars |

---

## GT Constraint Strategy

To ensure exactly 1 valid candidate per request (from 20 candidates):

### G01: Simple Metadata (10 requests)

Combine 2-3 rare attributes:
- `BYOB=True AND PriceRange=1`
- `DogsAllowed=True AND WiFi=free AND stars>=4.5`
- `CoatCheck=True AND Alcohol=full_bar`
- `HappyHour=True AND PriceRange=3`

### G02: Review Text (10 requests)

Search for unique phrases/sentiments:
- Reviews mentioning specific dishes
- Unique adjective combinations
- Named staff mentions

### G03: Computed Metadata - Hours (10 requests)

Time-based constraints:
- `closed_monday AND open_late_friday`
- `open_before_7am AND closed_sunday`
- `open_saturday_after_10pm`

### G04: Social Signals (10 requests)

User metadata constraints:
- `has_elite_review_2020 AND avg_review_useful>=10`
- `reviewer_with_1000+_friends`
- `review_from_user_with_500+_reviews`

### G05: Nested Logic (10 requests)

Compound constraints:
- `(BYOB OR Corkage) AND DogsAllowed`
- `PriceRange=1 AND (late_night OR early_open)`
- `(Cafes OR Bakeries) AND NOT(WiFi=free)`
